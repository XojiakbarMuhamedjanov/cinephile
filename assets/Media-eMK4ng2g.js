import{e as d,r as y,f as $,o as c,c as u,w as g,u as m,g as p,N as k,h as i,t as l,a as h,F as b,j as x,d as w,k as B,l as R,m as S,n as T,p as I,q as M,s as D}from"./index-CAXk9ZOQ.js";const F={class:"main__intro"},O={alt:"",class:"main__intro-poster"},z={class:"main__intro-block"},N={class:"main__intro-block-left"},j={class:"main__intro-block-left-title"},A={class:"main__intro-block-left-text"},L={class:"main__intro-block-left-descr"},Y={class:"main__intro-block-right"},C={alt:"",class:"main__intro-block-right-img"},U={class:"main__intro-actors"},V=i("h2",{class:"main__intro-actors-title"},"В главных ролях",-1),q={__name:"Intro",props:{type:String,item:Object},setup(t){const e=t,n=d(()=>new Date(e.item.release_date).getFullYear()||new Date(e.item.first_air_date).getFullYear()),o=d(()=>e.item.genres.reduce((s,_)=>s+`, ${_.name}`,"")),a=d(()=>{if(e.type=="tv"&&e.item.episode_run_time.length==0)return"";let s=e.type=="movie"?e.item.runtime:e.type=="tv"?e.item.episode_run_time[0]:"",_=Math.floor(s/60),r=s%60;return _==0?`${r}m`:`${_}h ${r}m`});return(s,_)=>{const r=y("Trailer"),f=y("Actors"),v=$("lazy");return c(),u("div",F,[g(i("img",O,null,512),[[v,t.item.backdrop_path?m(p)+t.item.backdrop_path:t.item.poster_path?m(p)+t.item.poster_path:m(k)]]),i("div",z,[i("div",N,[i("h1",j,l(t.item.title||t.item.name),1),i("p",A,l(t.item.overview||"Нет описания"),1),i("p",L,[i("span",null,l(n.value),1),i("span",null,l(o.value),1),i("span",null,l(a.value),1)]),h(r)]),i("div",Y,[g(i("img",C,null,512),[[v,m(p)+t.item.backdrop_path]])]),i("div",U,[V,h(f,{type:t.type,id:t.item.id,count:"6"},null,8,["type","id"])])])])}}},E={class:"main__info"},G={class:"main__info-item-name"},H={class:"main__info-item-text"},K={__name:"Info",props:{item:Object},setup(t){const e=t,n=d(()=>[{name:"Бюджет",text:e.item.budget?"$"+e.item.budget:"Неизвестно"},{name:"Сборы",text:e.item.revenue?"$"+e.item.revenue:"Неизвестно"},{name:"Статус",text:e.item.status=="Released"?"Выпущено":e.item.status},{name:"Исходное название",text:e.item.original_title||e.item.original_name}]);return(o,a)=>(c(),u("div",E,[(c(!0),u(b,null,x(n.value,s=>(c(),u("div",{class:"main__info-item",key:s.name},[i("span",G,l(s.name),1),i("span",H,l(s.text),1)]))),128))]))}},P={class:"main__rec"},J={class:"container"},Q=i("h2",{class:"main__rec-title"},"Рекомендации",-1),W={class:"main__rec-list"},X={alt:"",class:"main__rec-list-item-img"},Z={class:"main__rec-list-item-name"},ee={__name:"Rec",props:{rec:Array,type:String},setup(t){return(e,n)=>{const o=y("router-link"),a=$("lazy");return c(),u("div",P,[i("div",J,[Q,i("div",W,[(c(!0),u(b,null,x(t.rec,s=>(c(),w(o,{key:s.id,to:`${s.id}`,class:"main__rec-list-item"},{default:B(()=>[g(i("img",X,null,512),[[a,s.backdrop_path?m(p)+s.backdrop_path:s.poster_path?m(p)+s.poster_path:m(k)]]),i("h2",Z,l(s.name||s.title),1)]),_:2},1032,["to"]))),128))])])])}}},te=R({id:"rec",state:()=>({url:"https://api.themoviedb.org/3/",recomMovie:null,recomTv:null}),actions:{async getRecom({type:t,id:e}){try{const n=await S.get(`${this.url}${t}/${e}/recommendations?api_key=${T}&language=ru-RU`);t=="movie"?this.recomMovie=n.data.results:this.recomTv=n.data.results}catch(n){console.log("Ошибка произошла при получении рекомендаций",n)}}}}),se={key:0,class:"main__media"},ne={__name:"Media",props:{type:String},setup(t){const e=I(),n=te(),o=M(),a=t;n.getRecom({type:a.type,id:e.params.id}),o.getItemById({type:a.type,id:e.params.id});const s=d(()=>a.type=="movie"?o.movie:a.type=="tv"?o.tv:""),_=d(()=>{let r=a.type=="movie"?n.recomMovie:a.type=="tv"?n.recomTv:"";if(r)return r.slice(0,4)});return D(()=>{o.movie=o.tv=null}),(r,f)=>{const v=y("Loader");return s.value?(c(),u("div",se,[h(q,{type:t.type,item:s.value},null,8,["type","item"]),h(K,{item:s.value},null,8,["item"]),h(ee,{type:t.type,rec:_.value},null,8,["type","rec"])])):(c(),w(v,{key:1}))}}};export{ne as _};
